---
layout: post
title: 钉钉群机器人 -- 每日推送 之 前言
date: 2020-10-20
Author: 小萌 
tags: [技术分享]
comments: true
toc: true



---



> 最近突然看到了阿里的云小蜜机器人。突发想完成一个群消息推送的群机器人。奈何最近的酷Q机器人被迫关停，晨风群Q也被监督。
>


> 这里，发现钉钉群机器人实现定时推送甚好。

![image-20201025181939738](https://i.loli.net/2020/10/25/DFEOiHZuJY8co6k.png)

#### 本篇文章的主要内容大致分为三部分。

1. 开启钉钉群机器人
2. 实现钉钉群机器人推送资讯
3. 实现每日定时推送

### 正言

完成这个小项目，需要掌握一定的编程基础。钉钉群机器人的资讯推送可以使用众多语言实现，如 Java、Python、PHP、从、C# .....

这里，鄙人采用PHP方法实现钉钉机器人推送资讯。

官方钉钉群机器人文档表示，只要能够使用POST请求相关机器人接口，就可以完成推送。原理就是 post ，实现起来可能各有所异。

#### 钉钉群机器人创建

这个钉钉群机器人的创建是相当简单的，主要是了解创建过程中的一些要点即可。

##### 创建步骤

步骤一，打开机器人管理页面。以PC端为例，打开PC端钉钉，点击头像，选择“机器人管理”。

<img src="https://i.loli.net/2020/10/25/NdSgG17KysWn3Jb.png" alt="image.png" style="zoom:50%;" />

步骤二，在机器人管理页面选择“自定义”机器人，输入机器人名字并选择要发送消息的群，同时可以为机器人设置机器人头像。

![屏幕快照 2019-10-25 下午1.50.45.png](https://i.loli.net/2020/10/25/o68gCwyiaGIAUhj.png)

步骤三，完成必要的安全设置（至少选择一种），勾选 我已阅读并同意《自定义机器人服务及免责条款》，点击“完成”。安全设置目前有3种方式，设置说明见下文介绍。

![image.png](https://i.loli.net/2020/10/25/I6CqcaWAPoZ2ift.png)

###### 笔记

>这里，我们简要了解一下 安全设置的选择。第一项为自定义关键词，表示，只有post请求数据中含有关键词，机器人才会发到群里；第二种为加签，即使用阿里官方的接口生成的密钥对，才能够触发资讯推送，这种是较复杂的；第三种为限制IP段，即只有该网段的post请求，机器人才能够推送。安全性比较为：IP > 加签 > 关键字

步骤四，完成安全设置后，复制出机器人的Webhook地址，可用于向这个群发送消息，格式如下：

```
https://oapi.dingtalk.com/robot/send?access_token=XXXXXX
```

这里，Webhook 地址即为你的post地址。到这里，创建钉钉群机器人的步骤介绍结束。

### 结束

具体相关内容请参考 [官方文档](https://ding-doc.dingtalk.com/doc#/serverapi2/qf2nxq/uKPlK)

接下来，就是对于post的构造以及实现post的请求。





